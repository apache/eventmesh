(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{356:function(t,e,s){t.exports=s.p+"assets/img/circuit-break-p1.d9c56ef0.png"},378:function(t,e,s){"use strict";s.r(e);var r=s(42),a=Object(r.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h2",{attrs:{id:"_3-熔断"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-熔断"}},[t._v("#")]),t._v(" 3.熔断")]),t._v(" "),r("p",[t._v("      \nDeFiBus基于队列来做消费端的负载均衡，对同一个消费组，除广播模式外，每个队列只由一个消费者实例消费。当一个实例处理能力下降或者异常出现消息堆积时，为了避免堆积情况继续加剧，DeFiBus会触发队列的熔断，此时生产者实例在感知到队列熔断之后，会优先把消息发送到其他没有熔断的队列上，暂停往熔断队列上写入新消息。当堆积消除后，熔断被解除，生产者恢复往该队列发送消息。")]),t._v(" "),r("p",[t._v("      \nDeFiBus对每个Topic定义了深度的属性，表示Topic的队列允许堆积的最大消息条数。消息堆积数表示队列中尚未下发给消费者实例的消息条数，可由队列中最新一条消息的offset与消费者实例已经获取到的消息的offset的差值计算。\n")]),r("div",{attrs:{align:"center"}},[r("p"),t._v(" "),r("p",[r("img",{attrs:{src:s(356),alt:"offset"}})])]),t._v(" "),r("p",[t._v("      \n当Consumer出现异常或者触发了流控，Consumer拉消息过程受阻，队列的DeliverOffset停止不前，新消息持续写入，MaxOffset不断变大，最终MaxOffset与DeliverOffset将超过Topic的最大深度限制，触发队列熔断。")]),t._v(" "),r("hr"),t._v(" "),r("h4",{attrs:{id:"links"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#links"}},[t._v("#")]),t._v(" Links:")]),t._v(" "),r("ul",[r("li",[r("RouterLink",{attrs:{to:"/"}},[t._v("架构介绍")])],1),t._v(" "),r("li",[r("RouterLink",{attrs:{to:"/cn/features/docs/cn/features/1-request-response-call.html"}},[t._v("Request-Reply调用")])],1),t._v(" "),r("li",[r("RouterLink",{attrs:{to:"/cn/features/docs/cn/features/2-dark-launch.html"}},[t._v("灰度发布")])],1),t._v(" "),r("li",[r("RouterLink",{attrs:{to:"/cn/features/docs/cn/features/3-circuit-break-mechanism.html"}},[t._v("熔断机制")])],1),t._v(" "),r("li",[r("RouterLink",{attrs:{to:"/cn/features/docs/cn/features/4-invoke-service-nearby.html"}},[t._v("服务就近")])],1),t._v(" "),r("li",[r("RouterLink",{attrs:{to:"/cn/features/docs/cn/features/5-multi-active.html"}},[t._v("应用多活")])],1),t._v(" "),r("li",[r("RouterLink",{attrs:{to:"/cn/features/docs/cn/features/6-dynamic-adjust-queue.html"}},[t._v("动态扩缩队列")])],1),t._v(" "),r("li",[r("RouterLink",{attrs:{to:"/cn/features/docs/cn/features/8-fault-tolerant.html"}},[t._v("容错机制")])],1)])])}),[],!1,null,null,null);e.default=a.exports}}]);