(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{356:function(t,e,r){t.exports=r.p+"assets/img/a-distributing-architecture-in-financial.b8b532c6.png"},357:function(t,e,r){t.exports=r.p+"assets/img/architecture-p1.46b73238.png"},381:function(t,e,r){"use strict";r.r(e);var s=r(42),a=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"defibus"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#defibus"}},[t._v("#")]),t._v(" DeFiBus")]),t._v(" "),s("p",[s("strong",[t._v("DeFiBus=RPC+MQ，是基于开源消息中间件打造的安全可靠的分布式金融级消息总线。DeFibus不仅提供了RPC同步调用，还提供了MQ的异步事件通知、事件组播和广播等常用服务调用和消息模式，同时增加了应用多中心多活、服务就近、灰度发布等分布式场景下的高可用能力。在对于机器故障的容错能力方面的增强，也让消息总线的服务更加稳定可靠，为业务提供7x24的服务。")])]),t._v(" "),s("h3",{attrs:{id:"整体架构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#整体架构"}},[t._v("#")]),t._v(" 整体架构")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("p",[s("img",{attrs:{src:r(356),alt:"architecture1"}})])]),t._v(" "),s("p",[s("img",{attrs:{src:r(357),alt:"architecture2"}})]),t._v(" "),s("p",[t._v("DeFiBus主要包括以下几个组件（模块）：")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("Broker")]),t._v("：通过轻量的Topic和Queue机制提供消息存储功能。Broker定期将Topic信息上报到NameServer中，同集群中的Broker实例上报的NameServer必须保持一致，避免路由信息不一致。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("NameServer")]),t._v("：NameServer提供Topic的发现和路由，每一个NameServer接受Broker上报的Topic信息，并维护Topic的路由信息供客户端查询。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("GSL")]),t._v("：全局服务定位（Global Service Location）服务提供服务级别的路由发现。服务可以部署在不同的区域（比如不同的数据中心、逻辑分区等），服务请求方在请求某一个具体服务时，无需关注服务部署的区域，GSL能够根据服务发现规则自动定位到具体的服务，将服务信息返回给客户端。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("SGS")]),t._v("：服务治理系统（Service Government System）负责全局的服务管理，包括服务的申请、服务部署规划、服务下线等服务全生命周期的管理。在DeFiBus中，服务与Topic一一对应，Topic的名称由对应的服务按照一定的规则来命名。Topic的创建、更新和删除由SGS统一管理。SGS在服务的部署区域对应的Broker集群中创建Topic之后，将更新全局服务路由数据，供GSL定位服务使用。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Proxy")]),t._v("：服务代理（Proxy）提供HTTP接入方式，同时允许按照协议规范开发的C、GO、Python等其他语言客户端的接入。")])])]),t._v(" "),s("h3",{attrs:{id:"服务和topic的定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务和topic的定义"}},[t._v("#")]),t._v(" 服务和Topic的定义")]),t._v(" "),s("p",[t._v("      \nDeFiBus把服务和Topic做了一一对应，每个服务必须对应一个Topic。Topic根据服务的唯一ID和服务的部署区域来命名。每个服务需要有服务的唯一标识，可以用数字ID或者字符串来表示。每个部署区域使用3位长度的字符串（限数字和字母构成）表示。"),s("br"),t._v("\nTopic按照如下格式来命名：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[区域代码]-[服务唯一ID]\n")])])]),s("p",[t._v("比如，余额查询服务的服务ID为20190001表示，部署在“A10”这个区域，那么该服务在A10区域的Topic就命名为“A10-20190001”。Topic的命名规则")]),t._v(" "),s("h3",{attrs:{id:"特性列表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#特性列表"}},[t._v("#")]),t._v(" 特性列表:")]),t._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/cn/features/docs/cn/features/1-request-response-call.html"}},[t._v("RPC调用：即“Request-Reply”模式，支持系统间的同步调用")])],1),t._v(" "),s("li",[t._v("消息发布/订阅：消息的发布和订阅")]),t._v(" "),s("li",[s("RouterLink",{attrs:{to:"/cn/features/docs/cn/features/2-dark-launch.html"}},[t._v("灰度发布：服务级别的灰度发布")])],1),t._v(" "),s("li",[s("RouterLink",{attrs:{to:"/cn/features/docs/cn/features/3-circuit-break-mechanism.html"}},[t._v("熔断机制：应用实例级别的熔断")])],1),t._v(" "),s("li",[s("RouterLink",{attrs:{to:"/cn/features/docs/cn/features/4-invoke-service-nearby.html"}},[t._v("服务就近：就近进行服务的请求和响应，减少跨区调用")])],1),t._v(" "),s("li",[s("RouterLink",{attrs:{to:"/cn/features/docs/cn/features/5-multi-active.html"}},[t._v("应用多活：应用多中心多活")])],1),t._v(" "),s("li",[s("RouterLink",{attrs:{to:"/cn/features/docs/cn/features/6-dynamic-adjust-queue.html"}},[t._v("动态扩缩队列 ：自适应应用实例数量，动态调整队列个数")])],1),t._v(" "),s("li",[s("RouterLink",{attrs:{to:"/cn/features/docs/cn/features/8-fault-tolerant.html"}},[t._v("容错机制：故障和错误隔离")])],1),t._v(" "),s("li",[t._v("服务路由和定位：动态路由及定位(后续开源)")]),t._v(" "),s("li",[t._v("服务代理：HTTP及多语言的代理(后续开源)")]),t._v(" "),s("li",[t._v("服务治理：服务元数据的管理(后续开源)")]),t._v(" "),s("li",[t._v("平滑升级：平滑升级、平滑扩容(后续开源)")])])])}),[],!1,null,null,null);e.default=a.exports}}]);